"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const plugin_1 = require("@stryker-mutator/api/plugin");
const jest_1 = tslib_1.__importDefault(require("jest"));
class JestPromiseTestAdapter {
    constructor(log) {
        this.log = log;
    }
    run(jestConfig, projectRoot, fileNameUnderTest) {
        jestConfig.reporters = [];
        const config = JSON.stringify(jestConfig);
        this.log.trace(`Invoking Jest with config ${config}`);
        if (fileNameUnderTest) {
            this.log.trace(`Only running tests related to ${fileNameUnderTest}`);
        }
        return jest_1.default.runCLI(Object.assign(Object.assign({}, (fileNameUnderTest && { _: [fileNameUnderTest], findRelatedTests: true })), { config, runInBand: true, silent: true }), [projectRoot]);
    }
}
exports.default = JestPromiseTestAdapter;
JestPromiseTestAdapter.inject = plugin_1.tokens(plugin_1.commonTokens.logger);
//# sourceMappingURL=JestPromiseTestAdapter.js.map